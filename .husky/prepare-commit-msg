#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Se o commit já tem mensagem (via -m ou -F), não fazer nada
if [ -n "$2" ]; then
  exit 0
fi

# Mostrar sugestão de commit baseado nos arquivos modificados
echo ""
node scripts/suggest-commit.js
echo ""

# Se não tem mensagem, usar commitizen (interface interativa)
# Garantir que stdin/stdout estão conectados ao terminal para interação
exec < /dev/tty
exec > /dev/tty

# Chamar commitizen com --hook e passar o arquivo de mensagem
# O $1 é o caminho do arquivo de mensagem de commit temporário
npx --no -- cz --hook "$1"

